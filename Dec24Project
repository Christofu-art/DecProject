#include<Windows.h>
#include<iostream>
using namespace std;

void BattleSys();
int MonsterGen();
//void FinalFight();
//global variables: can be seen and used by all functions in the program!
string inventory[5];
int PlayerHealth = 100;

int main() {
	srand(time(NULL));
	int room = 1;
	string input;
	while (PlayerHealth > 0 && (input != "quit")) { //game loop!
		
		cout << endl << "-------------------------------------------" << endl;
		cout << "your iventoy: | ";
		for (int i = 0; i < 5; i++)
			cout << inventory[i] << " | ";
		cout << endl;
		
		switch (room) {
		case 1:
			BattleSys();
			cout << "you're in the graveyard, you can go north" << endl;
			inventory[0] = "mystic whip";
			inventory[1] = "armor";
			cin >> input;
			if (input == "north" || input == "go north")
				room = 2;
			break;
		case 2:
			BattleSys();
			cout << "you're in room 2, you can go south, north, west, or east" << endl;
			cin >> input;
			if (input == "south" || input == "go south")
				room = 1;
			else if (input == "west" || input == "go west")
				room = 3;
			else if (input == "east" || input == "go east")
				room = 4;
			else if (input == "north" || input == "go north")
				if (inventory[2] == "key") {
				cout << "you unlock the door with the key" << endl;
				inventory[2] = ""; //erases key form inventory
				room = 9;
			}
			else {
				cout << "Door is locked; Key item require to enter" << endl;
			}
			break;
		case 3:
			cout << "you're in room 3, you can go west" << endl;
			cin >> input;
			if (input == "west" || input == "go west")
				room = 5;
			else if (input == "east" || input == "go east")
				room = 2;
			break;
		case 4:
			cout << "You are in room 4, you can go east or west" << endl;
			cin >> input;
			if (input == "east" || input == "go east")
				room = 6;
			if (input == "west" || input == "go west")
				room = 2;
			break;
		case 5:
			cout << "You are in room 5, you can only go east" << endl;
			cin >> input;
			if (input == "east" || input == "go east")
				room = 3;
			break;
		case 6:
			cout << "you are in the catacombs, west is the only direction available" << endl;
			cin >> input;
			if (input == "west" || input == "go west")
				room = 4;
			break;
		case 7:
			cout << "you are in room 9, you can go west or east" << endl;
			cin >> input;
			if (input == "west" || input == "go west")
				room = 10;
			if (input == "east" || input == "go east")
				room = 8;
			break;
		case 8:
			cout << "you are in room 8, you can go north, west, or east" << endl;
			cin >> input;
			if (input == "north" || input == "go north")
				room = 12;
			if (input == "west" || input == "go west")
				room = 9;
			if (input == "east" || input == "go east")
				room = 7;
			break;
		case 9:
			cout << "you are in room 7, you can go west or east" << endl;
			cin >> input;
			if (input == "west" || input == "go west")
				room = 9;
			if (input == "death" || input == "DEATH")
				room = 16;
			break;
		case 10:
			cout << "you are in room 10, you can go west or east" << endl;
			cin >> input;
			if (input == "north" || input == "go north")
				room = 11;
			if (input == "east" || input == "go east")
				room = 9;
			break;
		case 11:
			cout << "you are in room 11, you can go north or west" << endl;
			cin >> input;
			if (input == "west" || input == "go west")
				room = 13;
			if (input == "north" || input == "go norht")
				room = 15;
			break;
		case 12:
			cout << "you are in room 12, you can go north" << endl;
			cin >> input;
			if (input == "north" || input == "go north")
				room = 14;
			break;
		case 13:
			cout << "you are in room 13, you can go east" << endl;
			cin >> input;
			if (input == "east" || input == "go east")
				room = 11;
			break;
		case 14:
			cout << "you are in room 14, you can go south" << endl;
			cin >> input;
			if (input == "south" || input == "go south")
				room = 12;
			break;
		}


	}//end of game loop


}//end of main

//function definition
void BattleSys() {
	int MonsterType = MonsterGen();
	int MonsterHealth = 0; //local variable: only be seen and used by BattleSim
	int MonsterDMG = 0;
	int input;
	int num;

	if (MonsterType == 1) {//skeleton
		MonsterHealth = 30;
	}

	if (MonsterType == 2) { //spider
		MonsterHealth = 25;
	}

	if (MonsterType == 3) { //zombie
		MonsterHealth = 35;
	}

	if (MonsterType == 4) { //golem
		MonsterHealth = 45;
	}

	if (MonsterType == 5) { //skeleton
		MonsterHealth = 20;
	}

	//set the monster"s damage depending on what type
	if (MonsterType == 1) { //skeleton
		MonsterDMG = rand() % 20 + 1;
	}

	if (MonsterType == 2) { //spider
		MonsterDMG = rand() % 6 + 5;
	}

	if (MonsterType == 3) { //zombie
		MonsterDMG = rand() % 15 + 1;
	}

	if (MonsterType == 4) { //Lesser Demon
		MonsterDMG = rand() % 16 + 5;
	}

	if (MonsterType == 5) { //skeleton
		MonsterDMG = rand() % 10 + 1;
	}

	//system("color 40");
	cout << endl << endl << "--------------------------BATTLE BEGINS--------------------------" << endl;
	cout << "a Nightcreature attacks!" << endl;
	while (PlayerHealth > 0 && MonsterHealth > 0) { //battle loop

		//Monster fight
		if (inventory[1] == "armor") {
			num = rand() % 7 + 3;
			cout << "your armor absorbs the blow and get hit for" << num << "damage!" << endl;
			PlayerHealth -= num;
		}
		else {
			num = rand() % 15 + 12;
			cout << "the monster bites your bare arm for " << num << " dmg" << endl;
			PlayerHealth -= num;
		}
		//gets player's choice:
		cout << "press 1 to attack, 2 to drink health potion, 3 to try escape!" << endl;
		cin >> input;

		switch (input) {
		case 1:
			//player attack
			if (inventory[0] == "mystic whip") {
				num = rand() % 10 + 10; //range from 10-20
				cout << "you slash the monster with your whip for " << num << "damage!" << endl;
				MonsterHealth -= num;
			}
			else {
				num = rand() % 5 + 2; //range from 2-7
				cout << "you attack for " << num << " dmg" << endl;
				MonsterHealth -= num;
			}
			break;
		case 2: //health
			if (inventory[3] == "potion") {
				cout << "jug jug!" << endl;
				PlayerHealth += 50;
				inventory[3] = " "; //erase the potion
			}
			else cout << "sorry you don't have any potions" << endl;

			break;
		case 3://escape
			num = rand() % 100;
			if (num > 75) {//25% chance of escaping
				cout << "you successfully run away!" << endl;
				MonsterHealth = 0;

			}
			else cout << "you are connered and can't escape!" << endl;
			break;
		default:
			cout << "srry not an option" << endl;
		}

		cout << "your health:" << PlayerHealth << endl;
		cout << "monster's health:" << MonsterHealth << endl;

	}//end of battle loop
	if (PlayerHealth > 0)
		cout << "you won!" << endl;
	else
		cout << "Chat, you DIED" << endl;
	cout << "--------------------------THE BATTLE END--------------------------" << endl << endl;
}

int MonsterGen() {
	int num = rand() % 100; // creates a number from 0-99
	if (num < 15) {//15% chance
		cout << "a skeleton spawned!" << endl;
		return 1;
	}
	else if (num < 20) {//5% chance
		cout << "a spider crawls towards you." << endl;
		cout << "it jumps at you." << endl;
		return 2;
	}

	else if (num < 50) {//30%
		cout << "a zombie stumbles forward." << endl;
		cout << "it chomps towards you." << endl;
		return 3;
	}
	else if (num < 75) {//25% chance
		cout << "Lesser Demon." << endl;
		cout << "it slams the floor infront of you." << endl;
		return 4;
	}
	else if (num < 100) {//25% chance
		cout << "spooky scary skeletons" << endl;
		return 5;
	}

}
